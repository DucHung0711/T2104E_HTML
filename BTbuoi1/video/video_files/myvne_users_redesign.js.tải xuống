var defaultDomain="vnexpress.net";-1<location.hostname.indexOf("ngoisao.net")?defaultDomain="ngoisao.net":-1<location.hostname.indexOf("ione.net")&&(defaultDomain="ione.net");var cookieName="login_system",cookieValue=1;if(0>document.cookie.indexOf(cookieName+"="+cookieValue)){var myDate=new Date;myDate.setMonth(myDate.getMonth()+12);document.cookie=cookieName+"="+cookieValue+";expires="+myDate+";domain=."+defaultDomain+";path=/"}window.console||(console={log:function(){}});
if("undefined"==typeof device_env)var device_env=4;
var isMyVne=window.location.href.includes("my."+defaultDomain),isIone=window.location.href.includes("//ione.net"),myvne_users={domain:"."+defaultDomain,prefix_cookie:"myvne_",static_url:"https://s1.vnecdn.net/myvne",myvne_url:-1<location.hostname.indexOf("demo.")||-1<location.hostname.indexOf("beta-my.")||-1<location.hostname.indexOf("redesign.")?"https://beta-my."+defaultDomain:"https://my."+defaultDomain,vne_url:"https://"+defaultDomain,profile:{},notifycount:0,notifylimit:10,notifyoffset:0,windowWidth:0,
taskbarload:{not_login:0,profile:0},listenloaded:0,timeoutprofile:"",timeoutClose:"",config:{},options:{taskbar:!0,type:"popup"},runloaded:0,callback:"",callbackAction:{},divposition:"body",fullname:null,action:null,return_code:null,message:null,oauth_type:null,time_now:(new Date).getTime(),check_responsive:0,cookieNameByHost:function(a){if("string"==typeof a&&""!=a){var b=location.host.match(/([^.]*)\.net/);0<b.length&&"vnexpress"!=b[1]&&(a+="_"+b[1])}return a},setCallback:function(a,b){var d=this.callbackAction;
d[a]?-1==d[a].indexOf(b)&&d[a].push(b):d[a]=[b];this.callbackAction=d;return"setcallback ok"},unsetCallback:function(a,b){var d=this.callbackAction;if(d[a]){if("authen"==a)return delete d[a];var c=d[a].indexOf(b);-1!=c&&d[a].splice(c,1)}return!1},processCallback:function(a,b){var d=this;"object"==typeof a&&$.each(a,function(e,f){d.processCallback(f,b)});var c=this.callbackAction;c[a]&&$.each(c[a],function(e,f){"authen"==a&&d.callbackAction[a].splice(e,1);d.runcallback(f,b)});return!1},addScripts:function(a,
b,d,c){var e=document.createElement("script");e.type="undefined"===typeof c?"text/javascript":c;e.src=a;e.async=b;e.onload=function(){e.setAttribute("loaded","loaded");"function"==typeof d&&d()};document.getElementsByTagName("head")[0].append(e)},getUrlParameter:function(a){var b=window.location.search.substring(1).split("&"),d;for(d=0;d<b.length;d++){var c=b[d].split("=");if(c[0]===a)return void 0===c[1]?!0:decodeURIComponent(c[1])}},run:function(a){this.action=this.getUrlParameter("action");this.return_code=
this.getUrlParameter("return_code");this.message=this.getUrlParameter("message");if("undefined"!==typeof this.action&&"logged"===this.action&&"undefined"!==typeof this.return_code&&"200"===this.return_code)this.oauth_type=this.getUrlParameter("oauth_type"),this.getprofile(),a=location.href.includes("?action=logged&return_code=200")?location.href.replace("?action=logged&return_code=200",""):location.href.replace("&action=logged&return_code=200",""),window.history.replaceState(!1,!1,a),myvne_users.syncWP("login");
else if("undefined"!==typeof this.action&&"logged_internal"===this.action&&"undefined"!==typeof this.return_code&&"200"===this.return_code)this.oauth_type=this.getUrlParameter("oauth_type"),this.getprofile(),location.href.includes("?action=logged_internal&return_code=200")?(a=location.href.replace("?action=logged_internal&return_code=200",""),"undefined"!==typeof this.oauth_type&&(a=location.href.replace("?action=logged_internal&return_code=200&oauth_type="+this.oauth_type,""))):(a=location.href.replace("&action=logged_internal&return_code=200",
""),"undefined"!==typeof this.oauth_type&&(a=location.href.replace("&action=logged_internal&return_code=200&oauth_type="+this.oauth_type,""))),window.history.replaceState(!1,!1,a),myvne_users.syncWP("login");else{this.options=$.extend(!0,this.options,a||{});a=window.location.href.includes("demo."+defaultDomain)?"pc":"production";this._responsive();this._check_javascript_exist();if(1==this.options.taskbar)if(parseInt(this.getCookie("user_id")))this.getprofile();else if(this._html_taskbar_not_login(),
this.processCallback("not_login",{type:1}),!localStorage.getItem("myvne_onetap")||Math.floor(Date.now()/1E3)-86400>parseInt(localStorage.getItem("myvne_onetap")))localStorage.removeItem("myvne_onetap"),this.onetap();this._listener_basic();"undefined"===typeof $.magnificPopup&&this.addScripts(js_url_vne+"/v3/"+a+"/libs/jquery.magnific-popup.min.js")}},syncWP:function(a){"undefined"!==typeof vneNotify&&("login"===a?setTimeout(function(){vneNotify.loginSubscriber(myvne_users.getCookieWitoutPrefix("orig_aid"),
myvne_users.getCookieWitoutPrefix(myvne_users.cookieNameByHost("myvne_user_id")));console.log("Push WP Login")},2E3):"logout"===a&&(vneNotify.logoutSubscriber(myvne_users.getCookieWitoutPrefix("orig_aid")),console.log("Push WP Logout")))},onetap:function(){$("#myvne_taskbar").append('<div id="g_id_onload" data-client_id="63695605483-uh3lvelqpb59s1tn5qh59ovbcuhfa54v.apps.googleusercontent.com" data-context="use" data-state_cookie_domain="'+defaultDomain+'" data-prompt_parent_id="g_id_onload" data-url_one_tap='+
window.location.href+' data-login_uri="'+this.myvne_url+'/openid/onetap" style="position: fixed; top: 50px; right: 10px; z-index: 1001;"></div>');this.addScripts("https://accounts.google.com/gsi/client",!1)},_responsive:function(){this.windowWidth=$(window).width()},getProfileData:function(a){"undefined"!=typeof a&&this.profile&&this.runcallback(a,this.profile);return this.profile},getprofile:function(){var a=this;if(a.profile.user_fullname&&a.profile.user_id)return a.profile;$.ajax({type:"get",dataType:"jsonp",
cache:!0,jsonpCallback:"MyvneCallback",url:a.myvne_url+"/authen/users/profile",success:function(d){if(0==d.error){var c=d.profile,e="undefined"!=typeof ZONE_ADS?parseInt(ZONE_ADS):0;"undefined"!=typeof c.user_avatar&&1==e&&(c.user_avatar=c.user_avatar.replace("a.vnecdn.net","vcdn-a.vnecdn.net"),c.user_avatar_original=c.user_avatar_original.replace("a.vnecdn.net","vcdn-a.vnecdn.net"));a.notifycount=d.count_notify;a.profile=c;a.profilecallback();if(null!=a.getCookie("social_id"))var f=a.getCookie("social_id").split("%2C");
a.deleteCookie("social_id");null!=a.oauth_type&&(window._logAdp||[]).push({action:a.oauth_type,regis_on:window.location.origin,my_vne:c.user_id,vne_avatar:c.user_avatar,vne_email:c.user_email,vne_phone:c.mobile||"",vne_name:c.user_fullname||"",vne_gender:c.sex||0,vne_age:c.age,vne_birthday:c.date_of_birth,vne_city:c.city,vne_dist:c.district,vne_address:c.address,login_type:c.user_login_type,facebook_id:f[0]||"",google_id:f[1]||""})}else"not_login"==d.rev&&a._reset_user();a.processCallback("profile",
a.profile)},error:function(d,c){console.log(d,c)}});var b="undefined"!=typeof sessionStorage?parseInt(sessionStorage.getItem("myvne_check_user_online")):NaN;(isNaN(b)||Math.floor(Date.now()/1E3)-900>=b)&&$.ajax({type:"post",dataType:"jsonp",url:a.myvne_url+"/authen/users/updateusersession",success:function(d){0==d.error&&"undefined"!=typeof sessionStorage&&sessionStorage.setItem("myvne_check_user_online",Math.floor(Date.now()/1E3))},error:function(d,c){console.log(d,c)}})},profilecallback:function(){this._set_user();
$("#myvne_action_log").hide()},logout:function(){var a=this;$.ajax({type:"post",dataType:"jsonp",url:a.myvne_url+"/authen/users/logout",data:{userid:a.user_id},success:function(b){if(0==b.error){localStorage.setItem("myvne_onetap",Math.floor(Date.now()/1E3));a._reset_user();a.deleteCookie("user_id");sessionStorage.removeItem("myvne_check_user_online");a.processCallback("logout",b);0<$(".message_box").length&&($(".message_box").remove(),localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),
1));"undefined"!==typeof myvne_plugins&&"undefined"!==typeof myvne_plugins.initButton&&myvne_plugins.initButton();"undefined"!==typeof dataLayer&&dataLayer.push({event:"userEvent",user_action:"User Logout",user_signup_method:"Email"});(window._logAdp||[]).push({action:"logout",regis_on:location.origin});myvne_users.syncWP("logout");b=[];-1<a.myvne_url.indexOf("vnexpress.net")?b=["my.ione.net","my.ngoisao.net"]:-1<a.myvne_url.indexOf("ngoisao.net")?b=["my.vnexpress.net","my.ione.net"]:-1<a.myvne_url.indexOf("ione.net")&&
(b=["my.vnexpress.net","my.ngoisao.net"]);if(-1<location.hostname.indexOf("demo.")||-1<location.hostname.indexOf("beta-my.")||-1<location.hostname.indexOf("redesign."))b[0]=b[0].replace("my.","beta-my."),b[1]=b[1].replace("my.","beta-my.");location.href="https://"+b[0]+"/authen/users/logout?dist=https://"+b[1]+"&count=1&return="+location.href}else alert(b.message)},error:function(b,d){alert(a._get_message("system_error"))}});return!1},_check_javascript_exist:function(){},set_time_topbar:function(){var a=
new Date,b=Array(7);b[0]="Ch\u1ee7 nh\u1eadt";b[1]="Th\u1ee9 hai";b[2]="Th\u1ee9 ba";b[3]="Th\u1ee9 t\u01b0";b[4]="Th\u1ee9 n\u0103m";b[5]="Th\u1ee9 s\u00e1u";b[6]="Th\u1ee9 b\u1ea3y";a=b[a.getDay()];b=new Date;var d=b.getDate(),c=b.getMonth()+1;b.getHours();b.getMinutes();return a+", "+d+"/"+c+"/"+b.getFullYear()},_html_taskbar_not_login:function(){var a=this,b=this.set_time_topbar();if($("#myvne_taskbar").length)isIone?$("#myvne_taskbar").html('<div id="myvne" class="myvne_taskbar myvne_login_button"><a href="javascript:void(0);" class="log_txt" title="\u0110\u0103ng nh\u1eadp"><svg class="icon-svg"><use xlink:href="#user"></use></svg></a></div>'):
($("#myvne_taskbar").html('<div id="myvne" class="myvne_taskbar myvne_login_button"><a href="javascript:void(0);" class="log_txt" title="\u0110\u0103ng nh\u1eadp"><svg class="ic ic-user"><use xlink:href="#User"></use></svg> \u0110\u0103ng nh\u1eadp</a></div>'),isMyVne&&($(".time-now").html(b),$("#logoVneHeader").html('<img src="'+img_url_vne+'/v2_2019/pc/graphics/logo.svg" alt="VNExpress">'))),0==a.taskbarload.not_login&&($("#myvne_taskbar").on("click",".myvne_login_button",function(){a._html_popup_login()}),
a.taskbarload.not_login=1);else return!1},_notify_replace_url:function(){"beta.vnexpress.net"===location.host&&$("#myvne_notify_lists .myvne_nofify_item:not(.link_replaced)").each(function(){var a=$(this);a.find("a").each(function(){$(this).removeAttr("onclick");var b=$(this).attr("href"),d=b.split("/");-1<b.indexOf("//vnexpress.net/")&&-1<b.indexOf(".html")&&(b="https://beta.vnexpress.net/"+d.pop(),a.addClass("link_replaced"),$(this).attr("href",b))})})},_get_notify_count:0,_get_notify:function(){var a=
this;$.ajax({type:"get",dataType:"jsonp",cache:!0,jsonpCallback:"MyvneCallback",data:{offset:a.notifyoffset,limit:a.notifylimit},url:a.myvne_url+"/authen/users/notify",success:function(b){if(0==b.error){var d=!0;a.notifyoffset+=a.notifylimit;$("#myvne_notify_lists .ss-content").length&&0<a._get_notify_count?($("#myvne_notify_lists .ss-content").append(b.html),a._notify_replace_url()):-1<b.html.indexOf("B\u1ea1n ch\u01b0a c\u00f3 ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn n\u00e0o tr\u00ean VnExpress")?
(d=!1,$("#myvne_notify_lists").css("height","auto"),$("#myvne_notify_lists").append('<li style="padding: 20px;">B\u1ea1n ch\u01b0a c\u00f3 ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn n\u00e0o tr\u00ean VnExpress</li>')):($("#myvne_notify_lists").append(b.html),a._notify_replace_url());$("#myvne_notify_count").remove();$("#myvne_notify_lists").find(".myvne_loading").remove();1==b.viewmore?($("#myvne_notify_viewmore_area").show(),$("#myvne_loading_viewmore").hide(),$("#myvne_notify_viewmore").show()):
$("#myvne_notify_viewmore_area").remove();a._get_notify_count++;if(0<$("#myvne_notify_lists").find(".myvne_nofify_item").find("a").length)$("#myvne_notify_lists").find(".myvne_nofify_item").find("a").on("click",function(c){c.preventDefault();c=$(this).attr("data-id");var e=$(this).attr("href");c&&$.ajax({type:"get",dataType:"jsonp",data:{notify_id:c},url:a.myvne_url+"/authen/users/changenotifystatus",success:function(f){a._redirect(e)},error:function(){console.log(a._get_message("system_error"))}})})}else a._html_popup_success(b.message),
a._reset_user();!0===d&&(b=document.querySelector("#myvne_notify_lists"),null!=b&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(b))},error:function(b,d){console.log(a._get_message("system_error"))}})},_html_taskbar_profile:function(){var a=this,b=this.set_time_topbar();if(!$("#myvne_taskbar").length||"object"!=typeof a.profile||null==a.profile.user_avatar||"undefined"===typeof a.profile.user_avatar)return!1;var d=10<a.profile.user_avatar.indexOf("/src/")?this.replaceAvatar(a.profile.user_avatar,
"/c60x60/"):a.profile.user_avatar,c=a.profile.user_email.substring(0,a.profile.user_email.lastIndexOf("@"));a.fullname?c=a.fullname:a.profile.user_fullname&&0<a.profile.user_fullname.length&&(c=a.profile.user_fullname);d=0<d.indexOf("/img_60x60.gif")?c.charAt(0):'<img src="'+d+'" width="25" height="25" alt="">';a.fullname=null;c='        <div id="myvne" class="myvne_taskbar">            <div class="myvne_container" id="myvne_user_logged">              <ul class="myvne_form_log logged">                <li class="myvne_user" id="myvne_profile_tool">                  <a href="javascript:void(0);" id="myvne_avatar_taskbar" class="myvne_avatar">                    <span class="avatar_inner">'+
d+'</span>                    <span class="name_user_av">'+c+'</span>                  </a>                  <ul class="myvne_user_status" style="display:none;">                    <li class="li_bd li_account">                      <span class="avatar_sub">'+d+'</span>                        <span class="name_sub">'+c+'</span>                    </li>                    <li><a href="'+a.myvne_url+"/users/feed/"+a.profile.user_id+'" title="Ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn">Ho\u1ea1t \u0111\u1ed9ng b\u00ecnh lu\u1eadn</a></li>                    <li><a href="'+
a.myvne_url+'/users/tin-da-luu" title="Tin \u0111\u00e3 l\u01b0u">Tin \u0111\u00e3 l\u01b0u</a></li>                    <li class="li_bd"><a href="'+a.myvne_url+'/users/tin-da-doc" title="Tin \u0111\u00e3 xem">Tin \u0111\u00e3 xem</a></li>                    <li class="li_bd"><a id="myvne_update_profile_link" href="'+a.myvne_url+'/users/chi-tiet-tai-khoan" title="T\u00e0i kho\u1ea3n c\u1ee7a t\u00f4i">T\u00e0i kho\u1ea3n c\u1ee7a t\u00f4i</a></li>                    <li class="li_bd"><a href="https://kidlab.vnexpress.net/" title="Kid-lab">Kid-lab</a></li>                    <li><a href="javascript:void(0);" id="myvne_logout_link">Tho\u00e1t</a></li>                  </ul>                </li>                <li class="myvne_notification" id="myvne_notify_show">                <a class="myvne_icon_bell_click"><svg class="ic ic-bell"><use xlink:href="#Bell"></use></svg></a><span id="myvne_notify_area">';
0<a.notifycount&&9>a.notifycount?c+='<span class="badged" id="myvne_notify_count">'+a.notifycount+"</span>":9<a.notifycount&&(c+='<span class="badged" id="myvne_notify_count">9+</span>');c+='</span><div id="myvne_notify_box" class="myvne_content_notification" style="display:none;">                    <ul id="myvne_notify_lists" class="scrollbar-macosx">                        <li class="myvne_loading">Loading</li>                    </ul>                    <ul id="myvne_notify_viewmore_area" style="display:none">                        <span id="myvne_loading_viewmore" style="display: none;">Loading</span>                        <a href="javascript:void(0);" id="myvne_notify_viewmore" class="myvne_notification-viewmore" style="display:none;">Xem th\u00eam</a>                    </ul>                </div>                </li>              </ul>              <div class="clear"></div>            </div>        </div>        ';
$("#myvne_taskbar").html(c);$("#fEmail").length&&($("#fEmail").val(a.profile.user_email),$("#fName").val(a.profile.user_fullname));isMyVne&&($(".time-now").html(b),$("#logoVneHeader").html('<img src="'+img_url_vne+'/v2_2019/pc/graphics/logo.svg" alt="VNExpress">'));0==a.taskbarload.profile&&($("#myvne_taskbar").on("click","#myvne_logout_link",function(){a.logout()}),$("#myvne_taskbar").on("click","#myvne_avatar_taskbar",function(){$("#myvne_notify_box").hide();$(".myvne_user_status").toggle()}),$(document).click(function(e){0==
$(e.target).parents(".myvne_user").length&&0==$(e.target).parents(".myvne_user_status").length&&$(".myvne_user_status").hide()}),$("#myvne_taskbar").on("click",".myvne_icon_bell_click",function(){$("#myvne_profile_tool").find(".myvne_user_status").hide();"none"!==$("#myvne_notify_box").css("display")?($("#myvne_notify_box").hide(),$(this).parent().removeClass("active")):($("#myvne_notify_box").show(),$(this).parent().addClass("active"),($("#myvne_notify_lists").find(".myvne_loading").length||$("#myvne_notify_count").length)&&
a._get_notify())}),$("#myvne_taskbar").on("click","#myvne_notify_viewmore",function(){$("#myvne_notify_viewmore").hide();$("#myvne_loading_viewmore").show();a.notifylimit=20;a._get_notify()}),a.taskbarload.profile=1)},_listener_basic:function(){var a=this;if(1==a.listenloaded)return!1;a.listenloaded=1;var b=function(d){if("https://my.vnexpress.net"==d.origin||"https://my.ione.net"==d.origin||"https://my.ngoisao.net"==d.origin||"https://demo-my.ione.net"==d.origin||"https://demo-my.ngoisao.net"==d.origin||
"https://demo-my.vnexpress.net"==d.origin||"https://beta-my.ione.net"==d.origin||"https://beta-my.ngoisao.net"==d.origin||"https://beta-my.vnexpress.net"==d.origin){var c=d.data;switch(c){case "success":break;case "close":$.magnificPopup.close();0<$("#iframe_register").length&&$("#iframe_register").remove();break;default:try{c=JSON.parse(c);if("undefined"!=typeof c.callback&&"login"==c.callback&&"undefined"!=typeof c.profile&&"object"!=typeof c.profile)break;if("undefined"!==typeof c.profile&&"undefined"===
typeof c.profile.user_avatar)break}catch(e){console.log(e)}if(1==c.success&&"undefined"!=typeof c.callback)switch(c.callback){case "subscribe":case "changepassword":case "forgotpass":case "resendactiveemail":case "resetpassword":a._html_popup_success(c.message,c.title);break;case "register":a.login(c);"undefined"!==typeof c.url_redirect?a._html_popup_success(c.message,c.title,function(){location.href=c.url_redirect}):a._html_popup_success(c.message,c.title);a.deleteCookie("tmp_notify");localStorage.removeItem(myvne_users.cookieNameByHost("myvne_tmp_notify"));
a.deleteCookie("expired_notify");a.deleteCookie("count_notify");localStorage.removeItem(myvne_users.cookieNameByHost("myvne_count_notify"));setTimeout(function(){a._html_notify_confirm_email()},3E4);break;default:return a[c.callback](c)}else if(c.refer)switch(c.refer){case "profile":a.profile=c.profile;a._set_user();break;case "login":a._reset_user()}else c.error&&a._html_popup_success('<div class="width_common block_log block_log_onlytext">                                            <div class="width_common tit_box">                                                <p>'+
c.message+"</p>                                            </div>                                        </div>",c.title)}}};window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent&&window.attachEvent("onmessage",b)},resetpassword:function(a){this._html_popup_success(a.message,this.vne_url)},_html_popup_reset_password:function(a,b){if(!b||!a)return!1;$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_resetpass" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:this.myvne_url+"/authen/users/resetpassword?userid="+a+"&tokenkey="+b,type:"iframe"},mainClass:"mfp-with-zoom mfp-myvne"});return!1},login:function(a){var b=this;if(null!=b.getCookie("social_id"))var d=b.getCookie("social_id").split("%2C");b.deleteCookie("social_id");b.profile=a.profile;b.notifycount=a.count_notify;b.profilecallback();$.magnificPopup.close();setTimeout(function(){b._html_notify_confirm_email()},3E3);0<$("#myvne_create_account").length&&$("#myvne_create_account").remove();
"undefined"!==typeof myvne_plugins&&(myvne_plugins.checking=0,myvne_plugins.check());b.processCallback(["login","authen"],b.profile);user_signup_method="Email";5===b.profile.user_login_type&&(user_signup_method="Facebook");6===b.profile.user_login_type&&(user_signup_method="Gmail");"undefined"!==typeof dataLayer&&dataLayer.push({event:"userEvent",user_action:"User Login",user_signup_method:user_signup_method,user_id:a.profile.user_id});if(1===a.success&&"register"==a.callback&&a.profile.user_id){var c=
window._logAdp||[];c.push({action:"register",regis_on:window.location.origin,my_vne:a.profile.user_id,vne_avatar:a.profile.user_avatar,vne_email:a.profile.user_email,vne_phone:a.profile.mibile||"",vne_name:a.profile.user_fullname||"",vne_gender:a.profile.sex||0,vne_age:a.profile.age,vne_birthday:a.profile.date_of_birth,vne_city:a.profile.city,vne_dist:a.profile.district,vne_address:a.profile.address,login_type:a.profile.user_login_type,facebook_id:d[0]||"",google_id:d[1]||""})}else"undefined"!==typeof a.adp&&
"undefined"!==typeof a.adp.my_vne&&(c=window._logAdp||[],c.push({action:a.adp.action,regis_on:window.location.origin,my_vne:a.adp.my_vne,vne_avatar:a.adp.vne_avatar,vne_email:a.adp.vne_email,vne_phone:a.adp.vne_phone||"",vne_name:a.adp.vne_name||"",vne_gender:a.adp.vne_gender||0,vne_age:a.adp.vne_age,vne_birthday:a.adp.vne_birthday,vne_city:a.adp.vne_city,vne_dist:a.adp.vne_dist,vne_address:a.adp.vne_address,login_type:a.profile.user_login_type,facebook_id:d[0]||"",google_id:d[1]||""}));myvne_users.syncWP("login");
isMyVne&&location.reload()},guestpost:function(a){this.profile=a.profile;$.magnificPopup.close();this.processCallback("authen",this.profile)},_html_popup_login:function(){if(1!=this.getCookie("login_system")){var a=new Date;a.setMonth(a.getMonth()+12);document.cookie="login_system=1;expires="+a+";domain=."+defaultDomain+";path=/"}1===device_env&&"undefined"!==typeof landingpage&&1===landingpage||1===this.check_responsive?$.magnificPopup.open({type:"iframe",items:{src:this.myvne_url+"/authen/users/login?refer=authen&view=redesign&host="+
location.origin+"&return="+encodeURIComponent(location.href.split("#")[0])},mainClass:"mfp-with-zoom mfp-myvne"}):$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/login?refer=authen&host="+location.origin+"&return="+encodeURIComponent(location.href.split("#")[0])},
mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})}}})},_html_popup_guest:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:this.myvne_url+"/authen/users/guestpost"+(this.config.input_extend?"?input_extend="+this.config.input_extend:"")},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"600px"})}}})},_html_popup_invite:function(a,b,d){var c=this;c.fullname=d;$.ajax({type:"get",dataType:"json",data:{email:b},
url:c.myvne_url+"/authen/users/checkemail",success:function(e){0==e.error?url="/authen/users/inviteregister?type="+a+"&email="+b+"&fullname="+d:1==e.error&&(url="/authen/users/login?type="+a+"&email="+b+"&fullname="+d+"&return="+encodeURIComponent(location.href.split("#")[0]));$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:c.myvne_url+url},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})}}})},error:function(e,f){console.log(c._get_message("system_error"))}})},_html_popup_register:function(){$.magnificPopup.instance.close();if(1!=this.getCookie("login_system")){var a=new Date;a.setMonth(a.getMonth()+
12);document.cookie="login_system=1;expires="+a+";domain=."+defaultDomain+";path=/"}$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/register?host="+location.origin+"&return="+encodeURIComponent(location.href.split("#")[0])},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,
overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"});$(this.container).find(".mfp-myvne .mfp-iframe-scaler iframe").css({"min-height":"500px"})},beforeClose:function(){try{document.getElementById("iframe_register").contentWindow.postMessage("removesession","*")}catch(b){}}}})},_html_popup_success:function(a,b,d){0==function(c){c=document.createRange().createContextualFragment(c);c.querySelectorAll("*").forEach(function(e){e.parentNode.removeChild(e)});
return!(c.textContent||"").trim()}(a)&&(a='<div class="width_common block_log block_log_onlytext">                    <div class="width_common tit_box">                        <p>'+a+"</p>                    </div>                </div>");if(""==b||"undefined"==typeof b)b="C\u00f3 l\u1ed7i x\u1ea3y ra";return $.magnificPopup.open({items:{src:'<div id="notice-popup" class="white-popup-myvne popup-notice"><div class="inner-popup"><div class="title_popup_myvne title_notice width_common">'+(b+'</div><div class="content_poup_myvne width_common content_log content_notice">')+
(a+"</div></div></div>"),type:"inline",mainClass:"mfp-with-zoom mfp-myvne"},callbacks:{open:function(){$(".mfp-content").css({"min-height":"500px","max-width":"768px"})},close:function(){"function"===typeof d&&d()}}})},_html_popup_forgot:function(a){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:self.myvne_url+
"/authen/users/forgotpass?cache=1"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})},afterClose:function(){$("#myvne_close_popup").unbind();a&&self._redirect(a)}}})},_html_popup_resend_mail:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:self.myvne_url+"/authen/users/resendactiveemail?cache=1"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})}}})},updateprofile:function(a){this.profile=a.profile;this._set_user();this._html_popup_success(a.message);this.processCallback("update_profile",this.profile)},_html_popup_profile:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:self.myvne_url+"/authen/users/updateprofile"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})}}})},_html_popup_change_password:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:self.myvne_url+"/authen/users/changepassword"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})}}})},_html_popup_subscribe:function(){$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log popup-notice"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_guest" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:self.myvne_url+"/subscribe/register"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})}}})},setCookie:function(a,b,d){var c=location.hostname;c=c.substring(c.lastIndexOf(".",c.lastIndexOf(".")-1)+1);a=-1!="sso social_id user_id users_cache_token remember_me expired_notify count_notify tmp_notify".split(" ").indexOf(a)?this.cookieNameByHost(this.prefix_cookie+
a):this.prefix_cookie+a;if(d){var e=new Date;e.setTime(e.getTime()+864E5*d);d="; expires="+e.toGMTString()}else d="";"undefined"!==typeof b&&(document.cookie="undefined"===typeof c?a+"="+b+d+";domain=."+defaultDomain+";path=/; secure;":a+"="+b+d+";domain=."+c+"; path=/; secure;")},setCookieSite:function(a,b,d){var c=document.domain;if(d){var e=new Date;e.setTime(e.getTime()+864E5*d);d="; expires="+e.toGMTString()}else d="";"undefined"!==typeof b&&(document.cookie=a+"="+b+d+";domain="+c+"; path=/; secure;")},
getCookieWitoutPrefix:function(a){a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(a))return c.substring(a.length,c.length)}return null},getCookie:function(a,b){var d=null,c=a;c=(b="boolean"==typeof b?b:!0)&&-1!="sso social_id user_id users_cache_token remember_me expired_notify count_notify tmp_notify".split(" ").indexOf(c)?this.cookieNameByHost(this.prefix_cookie+c):this.prefix_cookie+c;c+="=";for(var e=document.cookie.split(";"),
f=0;f<e.length;f++){for(var g=e[f];" "==g.charAt(0);)g=g.substring(1,g.length);0==g.indexOf(c)&&(d=g.substring(c.length,g.length))}null==d&&b&&(d=this.getCookie(a,!1));return d},deleteCookie:function(a){this.setCookie(a,"",-1)},_reset_user:function(){this.notifyoffset=this.notifycount=0;this.profile={};clearTimeout(this.timeoutprofile);$("#myvne_taskbar").empty();this._html_taskbar_not_login()},_set_user:function(){parseInt(this.getCookie("user_id"))||this.setCookie("user_id",this.profile.user_id,
365);this.setCookieSite("fosp_aid",this.profile.user_id,1);window.vne_myvne_id=this.profile.user_id;$("#myvne_user_logged").length?this._reload_profile():this._html_taskbar_profile()},_reload_profile:function(){var a=10<this.profile.user_avatar.indexOf("/src/")?this.replaceAvatar(this.profile.user_avatar,"/c60x60/"):this.profile.user_avatar;0<a.indexOf("/img_60x60.gif")?(a=this.profile.user_email.charAt(0),this.profile.user_fullname&&0<this.profile.user_fullname.length&&(a=this.profile.user_fullname.charAt(0))):
a='<img src="'+a+'" width="25" height="25" alt="">';var b=this.profile.user_fullname?this.profile.user_fullname:this.profile.user_email.substring(0,this.profile.user_email.lastIndexOf("@"));a='<span class="avatar_inner">'+a+'</span>            <span class="name_user_av">'+b+"</span>";$("#myvne_avatar_taskbar").html(a);0<this.notifycount&&$("#myvne_notify_area").html('<span class="badged" id="myvne_notify_count">'+this.notifycount+"</span>")},_get_message:function(a){var b="";switch(a){case "system_error":b=
""}return b},_redirect:function(a){window.location=a},authentication:function(a,b){if(null==myvne_users.getCookie("user_id"))switch(this.unsetCallback("authen"),this.setCallback("authen",a),b){case "member":this._html_popup_login();break;case "register":this._html_popup_register();break;default:this._html_popup_guest()}else this.runcallback(a,this.profile);return!1},runcallback:function(a,b){if(a)if("function"===typeof a)a.call(this,b);else if("string"==typeof a&&"function"==typeof window[a])window[a](b);
self.callback="";return!1},widgetgetuser:function(a,b){var d=this;b||(b="");a&&$.ajax({type:"get",dataType:"jsonp",jsonpCallback:b,data:{myvne_users_id:a},url:d.myvne_url+"/apifrontend/getusersprofile",success:function(c){0!=c.error&&console.log(c.message)},error:function(c,e){console.log(d._get_message("system_error"))}})},replaceAvatar:function(a,b){return a.replace("/src/",b)},resend_mail_register:function(a){var b=this;$("#resendemail_success").remove();$("#resendemail").attr("style","display:none");
$("#resendemail_loadding").removeAttr("style");$.ajax({type:"post",dataType:"json",url:b.myvne_url+"/authen/users/resendemail",data:{myvne_email:a},success:function(d){0==d.error?($("#resendemail").append('<p class="width_common tit_box mt15" id="resendemail_success">G\u1eedi l\u1ea1i th\u00e0nh c\u00f4ng</p>'),setTimeout(function(){$("#resendemail_success").remove()},3E3),$("#resendemail").removeAttr("style"),$("#resendemail_loadding").attr("style","display:none")):($("#resendemail").removeAttr("style"),
$("#resendemail").addClass("tit_box_error").html("<p>"+d.message+"</p>"))},error:function(d,c){alert(b._get_message("system_error"))}});return!1},anonymous:function(){$.magnificPopup.instance.close();this.processCallback("anonymous");this.setCookie("anonymous","anonymous",5)},_html_popup_close:function(){$.magnificPopup.close()},_html_popup_rule:function(){$.magnificPopup.instance.close();var a=this;$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe></div></div>'},
items:{src:a.myvne_url+"/authen/users/rule"},mainClass:"mfp-with-zoom mfp-myvne",alignTop:!1,overflowY:"scroll",callbacks:{open:function(){$(this.container).find(".mfp-content").css({"min-height":"500px","max-width":"768px"})},afterClose:function(){a._html_popup_register()}}})},_html_popup_register_comment:function(a,b){$("body").append('<div id="myvne_create_account" style="position: fixed; right: 30px; bottom: 0; z-index: 9999; background: #fff;"><iframe width="320" height="420" id="iframe_register" class="mfp-iframe iframe_register" frameborder="0" allowfullscreen="" src="'+
myvne_users.myvne_url+"/authen/users/registerv2?email="+b+"&name="+a+'"></iframe></div>')},_html_popup_rulev2:function(){$.magnificPopup.instance.close();$.magnificPopup.open({type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler white-popup-myvne popup-log"><div class="mfp-close"></div><iframe class="mfp-iframe iframe_register" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:this.myvne_url+"/authen/users/rule"},mainClass:"mfp-with-zoom mfp-myvne"})},_html_notify_confirm_email:function(){if(0<
Object.keys(myvne_users.profile).length&&0===myvne_users.profile.status){var a='<div class="message_box" style="right: 35px; width: 320px; background: #fff; position: fixed; right: 80px; bottom: 0; z-index: 999; -webkit-box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); -moz-box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); box-shadow: 0px 4px 5px 3px rgba(0,0,0,0.1); font-family: Arial, Helvetica, sans-serif;">                                <span class="close_mess" onclick="closeMess()" style="width: 32px;height: 32px;background: #fff;border: 1px solid #E5E5E5;text-align: center; line-height: 32px; border-radius: 50%; cursor: pointer; position: absolute; top: -16px; right: -16px; color: #4F4F4F; font-size: 30px;">\u00d7</span>                                <div class="width_common tit_mess_box" style="color: #9F224E; font-size: 18px; font-weight: 700; padding: 10px 15px; border-bottom: 1px solid #9F224E;">Th\u00f4ng b\u00e1o</div>                                <div class="width_common content_mess" style="padding: 15px; font-size: 15px;">                                    <p class="notice_p" style="line-height: 24px; margin-bottom: 20px;"><strong>M\u1eddi x\u00e1c th\u1ef1c email</strong><br>                                        \u0110\u00ea\u0309 \u0111a\u0309m ba\u0309o an toa\u0300n cho ta\u0300i khoa\u0309n va\u0300 co\u0301 th\u00ea\u0309 l\u00e2\u0301y la\u0323i m\u00e2\u0323t kh\u00e2\u0309u b\u0103\u0300ng email.                                    </p>                                    <p class="email_xt" style="color: #076DB6; font-weight: 700; max-width: 100%; overflow: hidden; text-overflow: ellipsis; text-align: center; white-space: nowrap; line-height: 24px; margin-bottom: 20px;">'+
myvne_users.profile.user_email+'</p>                                    <div class="item_input_log item_button_act">                                        <button class="pri_button btn_log has_transition" data-email="'+myvne_users.profile.user_email+'" id="home_resendemail">X\u00e1c th\u1ef1c ngay</button>                                    </div>                                </div>                            </div>',b=this.getCookie("expired_notify"),d=parseInt(localStorage.getItem(myvne_users.cookieNameByHost("myvne_count_notify"))),
c=parseInt(localStorage.getItem(myvne_users.cookieNameByHost("myvne_tmp_notify")));"undefined"!==typeof d&&null!=d?b?0==c&&$(document.body).append(a):(localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),0),1===d?(this.setCookie("expired_notify",1,1),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),2),$(document.body).append(a)):2===d?(this.setCookie("expired_notify",1,7),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),3),$(document.body).append(a)):
3===d?(this.setCookie("expired_notify",1,14),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),4),$(document.body).append(a)):4===d&&localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),999)):(this.setCookie("expired_notify",1,1),localStorage.setItem(myvne_users.cookieNameByHost("myvne_count_notify"),1),localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),0),$(document.body).append(a))}$(document).on("click","#home_resendemail",function(){localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),
1);$(".message_box").hide();var e=$(this).data("email");$.ajax({type:"post",dataType:"json",url:myvne_users.myvne_url+"/authen/users/resendemail",data:{myvne_email:e},success:function(f){0==f.error?(f="",-1<e.indexOf("gmail")&&(f='<a href="https://mail.google.com/mail/u/0/?tab=rm#search/vnexpress" target="_blank"><span style="width: 13px;height: 13px;display: inline-block;color: #ccc;fill: currentColor;margin-left: 4px;">\n<svg id="new-tab" viewBox="0 0 32 32" width="100%" height="100%"><title>new-tab</title><path d="M21.647 3.765c-1.040 0-1.883-0.843-1.883-1.883s0.843-1.882 1.883-1.882h8.471c1.039 0 1.882 0.844 1.882 1.882v8.471c0 1.039-0.843 1.882-1.882 1.882s-1.882-0.843-1.882-1.882v-3.927l-10.905 10.904c-0.735 0.735-1.927 0.735-2.662 0s-0.735-1.927 0-2.662l10.904-10.904h-3.927zM28.235 17.883c0-1.040 0.843-1.882 1.882-1.882s1.882 0.843 1.882 1.882v12.235c0 1.039-0.843 1.882-1.882 1.882h-28.235c-1.039 0-1.882-0.843-1.882-1.882v-28.235c0-1.039 0.843-1.882 1.882-1.882h12.235c1.040 0 1.883 0.843 1.883 1.882s-0.843 1.883-1.883 1.883h-10.352v24.47h24.47v-10.353z"></path></svg></span></a>'),
myvne_users._html_popup_success('<div class="width_common block_log block_log_onlytext">                                                <div class="width_common tit_box">                                                    <p>Ki\u1ec3m tra email </p>                                                    <p class="mt5">'+e+f+'</p>                                                    <p class="mt5">\u0110\u1ec3 x\u00e1c th\u1ef1c email tr\u00ean l\u00e0 c\u1ee7a b\u1ea1n</p>                                                    <p class="mt5">H\u00e3y nh\u1edb ki\u1ec3m tra h\u00f2m th\u01b0 r\u00e1c</p>                                                </div>                                                <div class="width_common tit_box mt40" id="resendemail">                                                    <p><a href="javascript:;" class="underline" onclick="myvne_users.resend_mail_register(\''+
e+'\')">G\u1eedi l\u1ea1i email</a></p>                                                </div>                                                <div style="display: none" class="width_common tit_box mt40" id="resendemail_loadding">\u0110ang g\u1eedi ...</div>                                            </div>',"X\u00e1c th\u1ef1c email")):alert(f.message)}});return!1})}};function MyvneCallback(a){}
$(document).ready(function(){setTimeout(function(){myvne_users._html_notify_confirm_email();"undefined"!==typeof myvne_users.action&&"error"===myvne_users.action&&"undefined"!==typeof myvne_users.message&&myvne_users._html_popup_success(myvne_users.message)},3E3)});function closeMess(){localStorage.setItem(myvne_users.cookieNameByHost("myvne_tmp_notify"),1);$(".message_box").remove()};